{% extends "base.html" %}

{% block content %}
<h2>Catálogo de libros</h2>

<!-- Buscador -->
<form action="/search" method="get" style="margin-bottom: 20px;">
    <input type="text" name="q" placeholder="Buscar por título o autor..." 
           value="{{ search_query or '' }}" 
           style="padding: 10px; width: 70%; border: 1px solid #ddd; border-radius: 3px;">
    <button type="submit" style="padding: 10px 20px; background-color: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer;">
        Buscar
    </button>
    <a href="/" style="margin-left: 10px;">Limpiar</a>
</form>

{% if search_query %}
<p><em>Resultados para: "{{ search_query }}"</em></p>
{% endif %}

<!-- Listado de libros -->
{% if books %}
<table style="width: 100%; border-collapse: collapse;">
    <thead>
        <tr style="background-color: #ecf0f1;">
            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #bdc3c7;">ID</th>
            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #bdc3c7;">Título</th>
            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #bdc3c7;">Autor</th>
            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #bdc3c7;">Categoría</th>
        </tr>
    </thead>
    <tbody>
        {% for book in books %}
        <tr style="border-bottom: 1px solid #ecf0f1;">
            <td style="padding: 10px;">{{ book.id }}</td>
            <td style="padding: 10px;">
                <a href="/book/{{ book.id }}">{{ book.title }}</a>
            </td>
            <td style="padding: 10px;">{{ book.author }}</td>
            <td style="padding: 10px;">{{ book.category }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No se encontraron libros.</p>
{% endif %}
{% endblock %}

